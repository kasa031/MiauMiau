<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Et morsomt og lÃ¦rerikt spill hvor du tar vare pÃ¥ din egen katt! Spill minispill, lÃ¦r om katter, samle achievements og mye mer.">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="MiauMiau">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="msapplication-config" content="browserconfig.xml">
    
    <title>MiauMiau - Katteparadis!</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-16x16.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512x512.png">
    
    <!-- Apple Touch Icons for iOS -->
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-192x192.png"> 
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png"> 
    <link rel="apple-touch-icon" sizes="144x144" href="icons/icon-144x144.png"> 
    <link rel="apple-touch-icon" sizes="120x120" href="icons/icon-128x128.png"> 
    <link rel="apple-touch-icon" sizes="114x114" href="icons/icon-96x96.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icons/icon-72x72.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- Windows Tile Icons -->
    <meta name="msapplication-TileImage" content="icons/icon-144x144.png">
    <meta name="msapplication-square70x70logo" content="icons/icon-72x72.png">
    <meta name="msapplication-square150x150logo" content="icons/icon-144x144.png">
    <meta name="msapplication-wide310x150logo" content="icons/icon-192x192.png">
    <meta name="msapplication-square310x310logo" content="icons/icon-512x512.png">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login Overlay -->
    <div id="login-overlay" class="login-overlay">
        <div class="login-modal">
            <h1>ğŸ± Velkommen til MiauMiau! ğŸ±</h1>
            <div id="login-form" class="login-form">
                <h2>Logg inn</h2>
                <label for="login-username" class="sr-only">Brukernavn</label>
                <input type="text" id="login-username" placeholder="Brukernavn" autocomplete="username" aria-label="Brukernavn" title="Brukernavn">
                <label for="login-password" class="sr-only">Passord</label>
                <input type="password" id="login-password" placeholder="Passord" autocomplete="current-password" aria-label="Passord" title="Passord">
                <button class="action-btn" id="login-btn" aria-label="Logg inn">Logg inn</button>
                <p class="login-switch">Har du ikke en bruker? <a href="#" id="show-signup-link" aria-label="Opprett ny bruker">Opprett ny bruker</a></p>
            </div>
            <div id="signup-form" class="login-form" style="display: none;">
                <h2>Opprett ny bruker</h2>
                <label for="signup-username" class="sr-only">Brukernavn</label>
                <input type="text" id="signup-username" placeholder="Brukernavn (minst 3 tegn)" autocomplete="username" aria-label="Brukernavn (minst 3 tegn)" title="Brukernavn (minst 3 tegn)">
                <label for="signup-password" class="sr-only">Passord</label>
                <input type="password" id="signup-password" placeholder="Passord (minst 4 tegn)" autocomplete="new-password" aria-label="Passord (minst 4 tegn)" title="Passord (minst 4 tegn)">
                <label for="signup-password-confirm" class="sr-only">Bekreft passord</label>
                <input type="password" id="signup-password-confirm" placeholder="Bekreft passord" autocomplete="new-password" aria-label="Bekreft passord" title="Bekreft passord">
                <button class="action-btn" id="signup-btn" aria-label="Opprett bruker">Opprett bruker</button>
                <p class="login-switch">Har du allerede en bruker? <a href="#" id="show-login-link" aria-label="Logg inn">Logg inn</a></p>
            </div>
            <div id="login-error" class="login-error"></div>
        </div>
    </div>

    <!-- Cat Selection Overlay -->
    <div id="cat-selection-overlay" class="cat-selection-overlay" style="display: none;">
        <div class="cat-selection-modal">
            <h1>ğŸ± Velg din fÃ¸rste katt! ğŸ±</h1>
            <p style="text-align: center; margin-bottom: 30px; font-size: 18px;">Velg hvilken katt du vil ta vare pÃ¥!</p>
            <div class="cat-selection-grid" id="cat-selection-grid">
                <!-- Katter vil bli generert her -->
            </div>
        </div>
    </div>

    <!-- Welcome Guide Overlay -->
    <div id="welcome-overlay" class="welcome-overlay" style="display: none;">
        <div class="welcome-modal">
            <h1>ğŸ± Velkommen til MiauMiau! ğŸ±</h1>
            <div class="welcome-content">
                <div class="welcome-section">
                    <h2>ğŸ“– Hvordan spille:</h2>
                    <p><strong>1. Ta vare pÃ¥ katten:</strong><br>
                    â€¢ Mat katten nÃ¥r den er sulten ğŸ–<br>
                    â€¢ Lek med katten for Ã¥ gjÃ¸re den glad ğŸ¾<br>
                    â€¢ Kose katten for mer lykke â¤ï¸<br>
                    â€¢ La den sove nÃ¥r den er sliten ğŸ˜´<br>
                    â€¢ Vask katten for Ã¥ gjÃ¸re den glad ğŸ§¼</p>
                    
                    <p><strong>2. FÃ¥ mynter ğŸ’°:</strong><br>
                    â€¢ Spill minispill (Musjakt eller Matfanging) ğŸ¯<br>
                    â€¢ FullfÃ¸r daglige utfordringer ğŸ“…<br>
                    â€¢ GÃ¥ opp i nivÃ¥er â­<br>
                    â€¢ Bruk items fra butikken!</p>
                    
                    <p><strong>3. KjÃ¸p items i butikken ğŸ›’:</strong><br>
                    â€¢ Leksaker for Ã¥ leke med katten ğŸ¾<br>
                    â€¢ Soveting (pute, teppe) for katten ğŸ’¤<br>
                    â€¢ Kosmetikk (halsbÃ¥nd, slÃ¸yfe, etc.) âœ¨</p>
                    
                    <p><strong>4. Utforsk:</strong><br>
                    â€¢ Se dine bedrifter ğŸ†<br>
                    â€¢ Samle katter i albumet ğŸ“¸<br>
                    â€¢ Sjekk statistikk ğŸ“Š</p>
                </div>
                <div class="welcome-tips">
                    <h3>ğŸ’¡ Tips:</h3>
                    <ul>
                        <li>Hold kattens lykke, sult og energi hÃ¸ye!</li>
                        <li>Spill minispill for Ã¥ tjene mynter raskt</li>
                        <li>Du kan "kjÃ¸pe deg fri" fra ventetid med mynter</li>
                        <li>HÃ¸yere nivÃ¥ = mer poeng og belÃ¸nninger!</li>
                    </ul>
                </div>
            </div>
            <button class="action-btn welcome-start-btn" onclick="closeWelcome()">Start spillet! ğŸ®</button>
        </div>
    </div>

    <nav class="navbar">
        <div class="nav-tabs">
            <button class="tab-btn active" data-tab="home">Hjem</button>
            <button class="tab-btn" data-tab="game">Spill ğŸ®</button>
            <button class="tab-btn" data-tab="shop">Butikk ğŸ›’</button>
            <button class="tab-btn" data-tab="achievements">Bedrifter ğŸ†</button>
            <button class="tab-btn" data-tab="album">Album ğŸ“¸</button>
            <button class="tab-btn" data-tab="school">Skole ğŸ“</button>
            <button class="tab-btn" data-tab="stats">Statistikk ğŸ“Š</button>
            <button class="tab-btn" data-tab="friends">Venner ğŸ‘«</button>
            <button class="tab-btn" data-tab="groups">Grupper ğŸ‘¥</button>
            <button class="tab-btn" data-tab="settings">Innstillinger âš™ï¸</button>
        </div>
    </nav>

    <div class="content">
        <!-- Home Tab -->
        <div id="home-tab" class="tab-content active">
            <div class="home-header">
                <h1>Velkommen til katteparadis! ğŸ±</h1>
                <div class="home-description">
                    <p>MiauMiau er et morsomt og lÃ¦rerikt spill hvor du tar vare pÃ¥ din egen katt! 
                    Spill minispill, lÃ¦r om katter i katteskolen, samle achievements og mynter, 
                    og utforsk alt katteparadiset har Ã¥ by pÃ¥. Alt er laget spesielt for barn, 
                    med enkle og tydelige tekster, morsomme aktiviteter og mye Ã¥ oppdage!</p>
                </div>
            </div>
            <div class="cat-container">
                <!-- Floating cats around -->
                <div class="floating-cat cat-1">ğŸ±</div>
                <div class="floating-cat cat-2">ğŸ˜¸</div>
                <div class="floating-cat cat-3">ğŸ˜»</div>
                <div class="floating-cat cat-4">ğŸ™€</div>
                <div class="floating-cat cat-5">ğŸ˜º</div>
                <div class="floating-cat cat-6">ğŸ˜¾</div>
                <div class="floating-cat cat-7">ğŸˆ</div>
                <div class="floating-cat cat-8">ğŸˆâ€â¬›</div>
                <div class="floating-cat cat-9">ğŸ˜¼</div>
                <div class="floating-cat cat-10">ğŸ˜½</div>
                <div class="floating-cat cat-11">ğŸ˜¹</div>
                <div class="floating-cat cat-12">ğŸ¾</div>
                
                <!-- Center cat with rainbow -->
                <div class="center-cat">
                    <div class="rainbow-container">
                        <div class="rainbow rainbow-1"></div>
                        <div class="rainbow rainbow-2"></div>
                        <div class="rainbow rainbow-3"></div>
                        <div class="rainbow rainbow-4"></div>
                        <div class="rainbow rainbow-5"></div>
                    </div>
                    <div class="cat-face" id="home-cat-face">ğŸ˜¸</div>
                </div>
                <!-- Interactive cat images -->
                <div class="interactive-cat-images">
                    <img src="Bilder/babycat.jpg" alt="Babykatt" class="interactive-cat-img" id="cat-img-1" onclick="showCatVideo('babycat.jpg', 'Babykatt')">
                    <img src="Bilder/brindle.jpg" alt="Brindle katt" class="interactive-cat-img" id="cat-img-2" onclick="showCatVideo('brindle.jpg', 'Brindle katt')">
                    <img src="Bilder/redcat.jpg" alt="RÃ¸d katt" class="interactive-cat-img" id="cat-img-3" onclick="showCatVideo('redcat.jpg', 'RÃ¸d katt')">
                    <img src="Bilder/Cat Pink GIF.gif" alt="Rosa katt" class="interactive-cat-img gif-img" id="cat-img-4" onclick="showCatVideo('Cat Pink GIF.gif', 'Rosa katt')">
                    <img src="Bilder/Bored Cat GIF.gif" alt="Kjedelig katt" class="interactive-cat-img gif-img" id="cat-img-5" onclick="showCatVideo('Bored Cat GIF.gif', 'Kjedelig katt')">
                    <img src="Bilder/Cat Battle GIF.gif" alt="Kattkamp" class="interactive-cat-img gif-img" id="cat-img-6" onclick="showCatVideo('Cat Battle GIF.gif', 'Kattkamp')">
                </div>
            </div>
        </div>

        <!-- Game Tab -->
        <div id="game-tab" class="tab-content">
            <div class="game-container">
                <h1>Spill ğŸ®</h1>
                
                <div class="game-cat-area" id="game-cat-area">
                    <div id="bed" class="bed">ğŸ›ï¸</div>
                    <div id="food-item" class="food-item"></div>
                    <!-- Decoration items will be rendered here -->
                    <div id="decoration-container" class="decoration-container"></div>
                    <div id="game-cat" class="game-cat">
                        <span class="cat-bow">ğŸ€</span>
                        <img id="game-cat-gif" src="" alt="Katt" style="display: none; max-width: 200px; max-height: 200px; border-radius: 15px;">
                        <span id="cat-emoji">ğŸ˜¸</span>
                    </div>
                    <div id="cat-status" class="cat-status">
                        <div class="stat">
                            <span>Happiness: </span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="happiness-bar" style="width: 50%"></div>
                            </div>
                            <span class="stat-value" id="happiness">50</span>%
                        </div>
                        <div class="stat">
                            <span>Hunger: </span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="hunger-bar" style="width: 50%"></div>
                            </div>
                            <span class="stat-value" id="hunger">50</span>%
                        </div>
                        <div class="stat">
                            <span>Energy: </span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="energy-bar" style="width: 50%"></div>
                            </div>
                            <span class="stat-value" id="energy">50</span>%
                        </div>
                        <div class="stat">
                            <span>Helse: </span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="health-bar" style="width: 100%"></div>
                            </div>
                            <span class="stat-value" id="health">100</span>%
                            <span id="sickness-indicator" style="display: none; margin-left: 10px; color: #e74c3c; font-weight: bold;"></span>
                        </div>
                    </div>
                    
                    <div class="score-section">
                        <div class="score-display">
                            <span>Poeng: </span>
                            <span id="score">0</span>
                        </div>
                        <div class="level-display">
                            <span>NivÃ¥: </span>
                            <span id="level">1</span>
                        </div>
                    </div>
                </div>

                <div class="game-actions">
                    <button class="action-btn" id="feed-btn">ğŸ– Mate</button>
                    <button class="action-btn" id="play-btn">ğŸ¾ Leke</button>
                    <button class="action-btn" id="pet-btn">â¤ï¸ Kose</button>
                    <button class="action-btn" id="sleep-btn">ğŸ˜´ La sove</button>
                    <button class="action-btn" id="clean-btn">ğŸ› Vask</button>
                    <button class="action-btn" id="pizza-btn">ğŸ• Pizza</button>
                    <button class="action-btn" id="bottle-btn">ğŸ¼ TÃ¥teflaske</button>
                    <button class="action-btn" id="hand-btn">ğŸ‘‹ KosehÃ¥nd</button>
                    <button class="action-btn" id="treat-btn" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">ğŸ¥ Behandle</button>
                    <button class="action-btn" id="manage-cats-btn" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">ğŸ± Kattevenner</button>
                    <button class="action-btn" id="decorate-btn" onclick="openDecorationMode()" style="background: linear-gradient(135deg, #16a085, #27ae60);">ğŸ  Dekorer</button>
                    <button class="action-btn" id="ai-cat-chat-btn" onclick="openAICatChat()" style="background: linear-gradient(135deg, #667eea, #764ba2);">ğŸ’¬ Snakk med katten</button>
                </div>
                
                <!-- Decoration Mode Overlay -->
                <div id="decoration-overlay" class="overlay" style="display: none;">
                    <div class="overlay-content decoration-modal">
                        <div class="decoration-header">
                            <h2>ğŸ  Dekorer kattens hjem</h2>
                            <button class="close-btn" onclick="closeDecorationMode()" style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer;">âœ•</button>
                        </div>
                        <div class="decoration-content">
                            <div class="decoration-inventory">
                                <h3>ğŸ“¦ Mine dekorasjoner</h3>
                                <div id="decoration-items-list" class="decoration-items-grid"></div>
                            </div>
                            <div class="decoration-preview">
                                <h3>ğŸ¡ ForhÃ¥ndsvisning</h3>
                                <div id="decoration-room" class="decoration-room">
                                    <div id="game-cat-decoration" class="game-cat-decoration">
                                        <span id="cat-emoji-decoration">ğŸ˜¸</span>
                                    </div>
                                    <!-- Decorations will be added here dynamically -->
                                </div>
                            </div>
                        </div>
                        <div class="decoration-actions">
                            <button class="action-btn" onclick="saveDecorations()" style="background: linear-gradient(135deg, #16a085, #27ae60);">ğŸ’¾ Lagre dekorasjoner</button>
                            <button class="action-btn" onclick="clearAllDecorations()" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">ğŸ—‘ï¸ Fjern alle</button>
                        </div>
                    </div>
                </div>
                
                <!-- Active Cats Display -->
                <div id="active-cats-section" class="active-cats-section" style="margin-top: 20px;">
                    <h3 style="margin-bottom: 10px; color: #333;">ğŸ± Aktive katter:</h3>
                    <div id="active-cats-container" class="active-cats-container"></div>
                </div>

                <div id="game-message" class="game-message"></div>
                <div id="cat-notifications" class="cat-notifications"></div>
                <div id="daily-challenge" class="daily-challenge"></div>
                <div id="daily-reward-section" class="daily-reward-section"></div>
                <div id="quests-section" class="quests-section" style="display: none;">
                    <h3 style="margin: 20px 0 10px; color: #333; font-size: 22px;">ğŸ“‹ Oppdrag:</h3>
                    <div id="quests-list" class="quests-list"></div>
                </div>
                <div id="owned-items-section" class="owned-items-section"></div>
                <div class="cat-tricks-section">
                    <h3 style="margin: 20px 0 10px; color: #333; font-size: 22px;">ğŸ© Kattetriks:</h3>
                    <div class="cat-tricks-buttons">
                        <button class="action-btn" onclick="teachCatTrick('sit')">Sitt ğŸª‘</button>
                        <button class="action-btn" onclick="teachCatTrick('jump')">Hopp ğŸ¦˜</button>
                        <button class="action-btn" onclick="teachCatTrick('spin')">Snurr ğŸŒªï¸</button>
                        <button class="action-btn" onclick="teachCatTrick('dance')">Dans ğŸ’ƒ</button>
                    </div>
                </div>
                
                <!-- Minigames Section -->
                <div class="minigames-section" style="margin-top: 40px; padding-top: 30px; border-top: 3px solid #667eea;">
                    <h2 style="margin: 20px 0; color: #333; font-size: 28px; text-align: center;">ğŸ¯ Minispill</h2>
                    <div class="minigames-grid">
                        <div class="minigame-card" id="mouse-hunt-game">
                            <h2>Musjakt ğŸ­</h2>
                            <p>Klikk pÃ¥ musene som dukker opp!</p>
                            <button class="action-btn" onclick="startMouseHunt()">Start spill</button>
                            <div class="minigame-area" id="mouse-hunt-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="mouse-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="mouse-time">30</span>s</div>
                            </div>
                        </div>
                        <div class="minigame-card" id="food-catch-game">
                            <h2>Matfanging ğŸ–</h2>
                            <p>Fang maten som faller ned fra himmelen!<br>
                            <strong>Kontroller:</strong> Bruk â† og â†’ piltastene for Ã¥ flytte katten<br>
                            <strong>MÃ¥l:</strong> FÃ¥ katten under maten fÃ¸r den faller i bakken</p>
                            <button class="action-btn" onclick="startFoodCatch()">Start spill</button>
                            <div class="minigame-area" id="food-catch-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="food-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="food-time">30</span>s</div>
                                <div class="catch-game-container" id="catch-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="cat-battle-game">
                            <h2>Kattkamp âš”ï¸</h2>
                            <p>Hjelp katten din Ã¥ kjempe! Klikk pÃ¥ angrepsknappen i rett tid!</p>
                            <button class="action-btn" onclick="startCatBattle()">Start spill</button>
                            <div class="minigame-area" id="cat-battle-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="battle-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="battle-time">30</span>s</div>
                                <div class="battle-container" id="battle-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="cat-scratch-game">
                            <h2>Katt-kloring ğŸ¾</h2>
                            <p>Klatr pÃ¥ kloretreet! Trykk pÃ¥ knappene nÃ¥r de lyser opp!</p>
                            <button class="action-btn" onclick="startCatScratch()">Start spill</button>
                            <div class="minigame-area" id="cat-scratch-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="scratch-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="scratch-time">30</span>s</div>
                                <div class="scratch-container" id="scratch-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="cat-hunt-game">
                            <h2>Kattjakt ğŸ¦</h2>
                            <p>Fang fugler og fisk! Beveg katten med piltastene eller touch!</p>
                            <button class="action-btn" onclick="startCatHunt()">Start spill</button>
                            <div class="minigame-area" id="cat-hunt-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="hunt-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="hunt-time">30</span>s</div>
                                <div class="hunt-game-container" id="hunt-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="nyan-cat-game">
                            <h2>Nyan Cat ğŸ±ğŸŒˆ</h2>
                            <p>Spesial spill! Se hvor langt du kan komme med Nyan Cat!</p>
                            <button class="action-btn" onclick="startNyanCat()">Start spill</button>
                            <div class="minigame-area" id="nyan-cat-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="nyan-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="nyan-time">60</span>s</div>
                                <div class="nyan-container" id="nyan-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="bored-cat-game">
                            <h2>Kjedelig Katt ğŸ˜´</h2>
                            <p>Lei katten med aktiviteter! Klikk pÃ¥ tingene som dukker opp!</p>
                            <button class="action-btn" onclick="startBoredCat()">Start spill</button>
                            <div class="minigame-area" id="bored-cat-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="bored-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="bored-time">30</span>s</div>
                                <div class="bored-container" id="bored-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="reading-game">
                            <h2>Lesespill ğŸ“š</h2>
                            <p>Match ord med bildet! Klikk pÃ¥ det riktige ordet!</p>
                            <button class="action-btn" onclick="startReadingGame()">Start spill</button>
                            <div class="minigame-area" id="reading-game-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="reading-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="reading-time">60</span>s</div>
                                <div class="reading-container" id="reading-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="memory-game">
                            <h2>Kattememory ğŸ§ </h2>
                            <p>Finn de matchende kattene! Test hukommelsen din!</p>
                            <button class="action-btn" onclick="startMemoryGame()">Start spill</button>
                            <div class="minigame-area" id="memory-game-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="memory-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="memory-time">60</span>s</div>
                                <div class="memory-container" id="memory-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="jump-game">
                            <h2>Kattehopp ğŸ¦˜</h2>
                            <p>Hopp over hindringene! Trykk mellomrom eller klikk for Ã¥ hoppe!</p>
                            <button class="action-btn" onclick="startJumpGame()">Start spill</button>
                            <div class="minigame-area" id="jump-game-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="jump-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="jump-time">45</span>s</div>
                                <div class="jump-game-container" id="jump-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="maze-game">
                            <h2>Kattelabyrint ğŸ§©</h2>
                            <p>Naviger katten gjennom labyrinten! Bruk piltastene eller swipe!</p>
                            <button class="action-btn" onclick="startMazeGame()">Start spill</button>
                            <div class="minigame-area" id="maze-game-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="maze-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="maze-time">60</span>s</div>
                                <div class="maze-game-container" id="maze-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="match3-game">
                            <h2>Kattematch-3 ğŸ¯</h2>
                            <p>Match 3 eller flere like katter for Ã¥ fÃ¥ poeng!</p>
                            <button class="action-btn" onclick="startMatch3Game()">Start spill</button>
                            <div class="minigame-area" id="match3-game-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="match3-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="match3-time">60</span>s</div>
                                <div class="match3-game-container" id="match3-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="tap-game">
                            <h2>Kattetapet ğŸ‘†</h2>
                            <p>Trykk pÃ¥ kattene sÃ¥ raskt som mulig! Hvor mange kan du fange?</p>
                            <button class="action-btn" onclick="startTapGame()">Start spill</button>
                            <div class="minigame-area" id="tap-game-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="tap-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="tap-time">30</span>s</div>
                                <div class="tap-game-container" id="tap-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="cat-quiz-game">
                            <h2>Kattetest ğŸ§ </h2>
                            <p>Test kunnskapen din om katter! Svar pÃ¥ spÃ¸rsmÃ¥lene!</p>
                            <button class="action-btn" onclick="startCatQuiz()">Start spill</button>
                            <div class="minigame-area" id="cat-quiz-game-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="cat-quiz-score">0</span></div>
                                <div class="cat-quiz-container" id="cat-quiz-container"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Shop Tab -->
        <div id="shop-tab" class="tab-content">
            <div class="shop-container">
                <h1>Butikk ğŸ›’</h1>
                <div class="coins-display">ğŸ’° Mynter: <span id="coins">0</span></div>
                <div class="shop-items" id="shop-items"></div>
                <div class="shop-pagination" id="shop-pagination" style="display: none;">
                    <button class="pagination-btn" id="shop-prev-btn" onclick="changeShopPage(-1)">â† Forrige</button>
                    <span class="pagination-info" id="shop-page-info">Side 1 av 1</span>
                    <button class="pagination-btn" id="shop-next-btn" onclick="changeShopPage(1)">Neste â†’</button>
                </div>
            </div>
        </div>

        <!-- Achievements Tab -->
        <div id="achievements-tab" class="tab-content">
            <div class="achievements-container">
                <h1>Bedrifter ğŸ†</h1>
                <div class="achievements-grid" id="achievements-grid"></div>
            </div>
        </div>

        <!-- Album Tab -->
        <div id="album-tab" class="tab-content">
            <div class="album-container">
                <h1>Album ğŸ“¸</h1>
                <div class="cats-selector">
                    <button class="cat-select-btn active" data-cat="0">Katt 1</button>
                    <button class="cat-select-btn" data-cat="1">Katt 2</button>
                    <button class="cat-select-btn" data-cat="2">Katt 3</button>
                    <button class="cat-select-btn" data-cat="3">Babykatt</button>
                    <button class="cat-select-btn" data-cat="4">Brindle</button>
                    <button class="cat-select-btn" data-cat="5">RÃ¸d katt</button>
                    <button class="cat-select-btn" data-cat="6">Rosa katt</button>
                </div>
                <div class="album-cat-display" id="album-cat-display"></div>
            </div>
        </div>

        <!-- School Tab -->
        <div id="school-tab" class="tab-content">
            <div class="school-container">
                <h1>Skole ğŸ“</h1>
                <div class="school-subjects">
                    <div class="subject-card" id="math-subject">
                        <h2>ğŸ”¢ Kattergening</h2>
                        <p>LÃ¦r regning med katter! Pluss, minus, gange og dele opp til 10.</p>
                        <button class="action-btn" onclick="startMathGame()">Start lekse</button>
                        <div class="subject-area" id="math-area" style="display:none;"></div>
                    </div>
                    <div class="subject-card" id="hygiene-subject">
                        <h2>ğŸ§¼ Kattehygiene</h2>
                        <p>LÃ¦r om hvordan katter holder seg rene!</p>
                        <button class="action-btn" onclick="showHygieneInfo()">Les mer</button>
                        <div class="subject-area" id="hygiene-area" style="display:none;"></div>
                    </div>
                    <div class="subject-card" id="food-subject">
                        <h2>ğŸ½ï¸ Kattemat</h2>
                        <p>Lag mat til katten! Hva liker katter Ã¥ spise?</p>
                        <button class="action-btn" onclick="startCookingGame()">Lag mat</button>
                        <div class="subject-area" id="cooking-area" style="display:none;"></div>
                    </div>
                    <div class="subject-card" id="art-subject">
                        <h2>ğŸ¨ Katteestetikk</h2>
                        <p>Tegn og fargelegg katter! Kreativ lekse!</p>
                        <button class="action-btn" onclick="startArtGame()">Start tegning</button>
                        <div class="subject-area" id="art-area" style="display:none;"></div>
                    </div>
                    <div class="subject-card" id="quiz-subject">
                        <h2>ğŸ§  Kattefakta Quiz</h2>
                        <p>Test kunnskapen din om katter! Svar pÃ¥ spÃ¸rsmÃ¥l og fÃ¥ poeng!</p>
                        <button class="action-btn" onclick="startCatQuiz()">Start quiz</button>
                        <div class="subject-area" id="quiz-area" style="display:none;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Tab -->
        <div id="stats-tab" class="tab-content">
            <div class="stats-container">
                <h1>Statistikk ğŸ“Š</h1>
                <div class="stats-grid" id="stats-grid"></div>
                
                <!-- Global Leaderboard Section -->
                <div class="leaderboard-section" style="margin-top: 40px; padding-top: 30px; border-top: 3px solid #667eea;">
                    <h2 style="text-align: center; color: #667eea; font-size: 28px; margin-bottom: 20px;">ğŸ† Global Rangering ğŸ†</h2>
                    <div class="leaderboard-controls" style="display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap;">
                        <button class="action-btn" onclick="renderGlobalLeaderboard('score')" id="leaderboard-btn-score">ğŸ† Poeng</button>
                        <button class="action-btn" onclick="renderGlobalLeaderboard('level')" id="leaderboard-btn-level">â­ NivÃ¥</button>
                        <button class="action-btn" onclick="renderGlobalLeaderboard('coins')" id="leaderboard-btn-coins">ğŸ’° Mynter</button>
                        <button class="action-btn" onclick="renderGlobalLeaderboard('achievements')" id="leaderboard-btn-achievements">ğŸ–ï¸ Achievements</button>
                    </div>
                    <div id="global-leaderboard" class="global-leaderboard">
                        <p style="text-align: center; color: #999; padding: 20px;">Laster rangering...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Friends Tab -->
        <div id="friends-tab" class="tab-content">
            <div class="friends-container">
                <h1>Venner ğŸ‘«</h1>
                
                <!-- Friend Requests -->
                <div id="friend-requests-section" class="friend-section">
                    <h2>ğŸ“¬ VennforespÃ¸rsler</h2>
                    <div id="friend-requests-list" class="friend-requests-list"></div>
                </div>
                
                <!-- Add Friend -->
                <div class="friend-section">
                    <h2>â• Legg til venn</h2>
                    <div class="friend-form">
                        <label class="settings-label">Brukernavn:</label>
                        <label for="friend-username-input" class="sr-only">Brukernavn</label>
                        <input type="text" id="friend-username-input" class="group-input" placeholder="Skriv brukernavnet" maxlength="30" aria-label="Skriv brukernavnet" title="Skriv brukernavnet">
                        <button class="action-btn" onclick="sendFriendRequest()">ğŸ“¤ Send vennforespÃ¸rsel</button>
                    </div>
                </div>
                
                <!-- My Friends List -->
                <div class="friend-section">
                    <h2>ğŸ‘¥ Mine venner</h2>
                    <div id="friends-list" class="friends-list"></div>
                </div>
                
                <!-- Friends Leaderboard -->
                <div class="friend-section">
                    <h2>ğŸ† Vennetavle</h2>
                    <div id="friends-leaderboard" class="friends-leaderboard"></div>
                </div>
                
                <!-- Friend Messages -->
                <div id="friend-messages-section" class="friend-section" style="display: none;">
                    <h2>ğŸ’Œ Meldinger til <span id="friend-messages-username"></span></h2>
                    <div class="friend-messages-container">
                        <div id="friend-messages-list" class="friend-messages-list"></div>
                        <div class="friend-messages-input-container">
                            <label for="friend-message-input" class="sr-only">Melding</label>
                            <input type="text" id="friend-message-input" class="group-chat-input" placeholder="Skriv en melding..." maxlength="200" aria-label="Skriv en melding" title="Skriv en melding">
                            <button class="action-btn" onclick="sendFriendMessage()">Send</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Groups Tab -->
        <div id="groups-tab" class="tab-content">
            <div class="groups-container">
                <h1>Grupper ğŸ‘¥</h1>
                
                <!-- My Group Info -->
                <div id="my-group-section" class="group-section" style="display: none;">
                    <h2>ğŸ¯ Min gruppe</h2>
                    <div class="group-info-card">
                        <div class="group-header">
                            <h3 id="current-group-name"></h3>
                            <span id="current-group-role" class="group-role"></span>
                        </div>
                        <p id="current-group-members-count" class="group-members-count"></p>
                        <div id="group-challenge-section" class="group-challenge-box" style="display: none;">
                            <div class="challenge-header">
                                <h4>ğŸ¯ Gruppens ukentlige utfordring:</h4>
                                <button class="challenge-edit-btn" onclick="showChallengeManager()" title="Administrer utfordringer">âš™ï¸</button>
                            </div>
                            <div id="challenges-list" class="challenges-list"></div>
                            <p id="group-challenge-text"></p>
                            <div class="group-challenge-progress">
                                <div class="progress-bar-mini" style="background: #e0e0e0;">
                                    <div id="group-challenge-progress-bar" class="progress-fill" style="width: 0%;"></div>
                                </div>
                                <span id="group-challenge-progress-text">0/0</span>
                            </div>
                        </div>
                        <div id="daily-group-challenge-section" class="group-challenge-box daily-challenge-box" style="display: none;">
                            <div class="challenge-header">
                                <h4>ğŸ“… Gruppens daglige utfordring:</h4>
                            </div>
                            <div id="daily-challenges-list" class="challenges-list"></div>
                            <p id="daily-group-challenge-text"></p>
                            <div class="group-challenge-progress">
                                <div class="progress-bar-mini" style="background: #e0e0e0;">
                                    <div id="daily-group-challenge-progress-bar" class="progress-fill" style="width: 0%;"></div>
                                </div>
                                <span id="daily-group-challenge-progress-text">0/0</span>
                            </div>
                        </div>
                        <div class="group-actions">
                            <button class="action-btn" onclick="viewGroupStats()">ğŸ“Š Se gruppestatistikk</button>
                            <button class="action-btn" onclick="openGroupChat()">ğŸ’¬ Gruppechat</button>
                            <button class="action-btn" onclick="viewGroupMembers()">ğŸ‘¥ Se medlemmer</button>
                            <button class="action-btn" onclick="openCompetitions()" style="background: linear-gradient(135deg, #f39c12, #e67e22);">ğŸ† Konkurranser</button>
                            <button class="action-btn" onclick="leaveGroup()" style="background: linear-gradient(135deg, #e74c3c, #c0392b); margin-top: 10px;">Forlat gruppe</button>
                        </div>
                    </div>
                </div>
                
                <!-- Create Group -->
                <div class="group-section">
                    <h2>â• Opprett ny gruppe</h2>
                    <div class="group-form">
                        <label class="settings-label">Gruppenavn:</label>
                        <input type="text" id="new-group-name" class="group-input" placeholder="F.eks. Kattelag2024" maxlength="30" aria-label="Gruppenavn" title="Gruppenavn">
                        <label class="settings-label" for="new-group-password">Passord (for Ã¥ joine gruppen):</label>
                        <input type="password" id="new-group-password" class="group-input" placeholder="Velg et passord" maxlength="20" aria-label="Passord for gruppen" title="Passord for gruppen">
                        <button class="action-btn" onclick="createGroup()">ğŸ‰ Opprett gruppe</button>
                    </div>
                </div>
                
                <!-- Join Group -->
                <div class="group-section">
                    <h2>ğŸ” Bli med i gruppe</h2>
                    <div class="group-form">
                        <label class="settings-label">Gruppenavn:</label>
                        <input type="text" id="join-group-name" class="group-input" placeholder="Skriv gruppenavnet" maxlength="30" aria-label="Gruppenavn" title="Gruppenavn">
                        <label class="settings-label" for="join-group-password">Passord:</label>
                        <input type="password" id="join-group-password" class="group-input" placeholder="Skriv gruppepassordet" aria-label="Gruppepassord" title="Gruppepassord">
                        <button class="action-btn" onclick="joinGroup()">âœ… Bli med</button>
                    </div>
                    <div class="invite-friends-section" style="margin-top: 15px;">
                        <h3 style="font-size: 16px; margin-bottom: 10px;">ğŸ“¨ Eller inviter venner til gruppe:</h3>
                        <div id="invite-friends-list" class="invite-friends-list"></div>
                    </div>
                </div>
                
                <!-- Group Statistics Comparison -->
                <div id="group-stats-section" class="group-section" style="display: none;">
                    <h2>ğŸ“Š Gruppestatistikk</h2>
                    <div id="group-stats-grid" class="group-stats-grid"></div>
                </div>
                
                <!-- Group Chat -->
                <div id="group-chat-section" class="group-section" style="display: none;">
                    <h2>ğŸ’¬ Gruppechat</h2>
                    <div class="group-chat-container">
                        <div id="group-chat-messages" class="group-chat-messages"></div>
                        <div class="group-chat-input-container">
                            <div class="chat-emoji-picker">
                                <button class="emoji-picker-btn" onclick="toggleEmojiPicker()" title="Velg emoji">ğŸ˜Š</button>
                                <div id="emoji-picker" class="emoji-picker" style="display: none;">
                                    <div class="emoji-grid">
                                        <span onclick="insertEmoji('ğŸ˜Š')">ğŸ˜Š</span>
                                        <span onclick="insertEmoji('ğŸ˜¸')">ğŸ˜¸</span>
                                        <span onclick="insertEmoji('ğŸ˜º')">ğŸ˜º</span>
                                        <span onclick="insertEmoji('ğŸ˜»')">ğŸ˜»</span>
                                        <span onclick="insertEmoji('ğŸ±')">ğŸ±</span>
                                        <span onclick="insertEmoji('ğŸ‰')">ğŸ‰</span>
                                        <span onclick="insertEmoji('ğŸ®')">ğŸ®</span>
                                        <span onclick="insertEmoji('ğŸ†')">ğŸ†</span>
                                        <span onclick="insertEmoji('â­')">â­</span>
                                        <span onclick="insertEmoji('ğŸ’–')">ğŸ’–</span>
                                        <span onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
                                        <span onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
                                    </div>
                                </div>
                            </div>
                            <label for="group-chat-input" class="sr-only">Gruppemelding</label>
                            <input type="text" id="group-chat-input" class="group-chat-input" placeholder="Skriv en melding..." maxlength="200" aria-label="Skriv en melding" title="Skriv en melding">
                            <button class="action-btn" onclick="sendGroupMessage()">Send</button>
                        </div>
                    </div>
                </div>
                
                <!-- Group Members List -->
                <div id="group-members-section" class="group-section" style="display: none;">
                    <h2>ğŸ‘¥ Gruppemedlemmer</h2>
                    <div id="group-members-list" class="group-members-list"></div>
                </div>
                
                <!-- Challenge Manager -->
                <div id="challenge-manager-modal" class="modal-overlay" style="display: none;">
                    <div class="modal-content">
                        <h2>âš™ï¸ Administrer utfordringer</h2>
                        <div class="challenge-manager">
                            <div class="existing-challenges">
                                <h3>NÃ¥vÃ¦rende utfordringer:</h3>
                                <div id="existing-challenges-list" class="challenges-list-manager"></div>
                            </div>
                            <div class="add-challenge">
                                <h3>Legg til ny utfordring:</h3>
                                <label class="settings-label" for="new-challenge-type">Type:</label>
                                <select id="new-challenge-type" class="group-input" aria-label="Type utfordring" title="Type utfordring">
                                    <option value="score">Poeng</option>
                                    <option value="minigame">Minispill</option>
                                    <option value="feed">Mat</option>
                                    <option value="play">Lek</option>
                                    <option value="level">NivÃ¥</option>
                                </select>
                                <label class="settings-label" for="new-challenge-desc">Beskrivelse:</label>
                                <input type="text" id="new-challenge-desc" class="group-input" placeholder="F.eks. Samle 1000 poeng til sammen" maxlength="50" aria-label="Beskrivelse av utfordring" title="Beskrivelse av utfordring">
                                <label class="settings-label" for="new-challenge-target">MÃ¥l:</label>
                                <input type="number" id="new-challenge-target" class="group-input" placeholder="1000" min="1" aria-label="MÃ¥l for utfordring" title="MÃ¥l for utfordring">
                                <button class="action-btn" onclick="addGroupChallenge()">â• Legg til utfordring</button>
                            </div>
                        </div>
                        <button class="action-btn" onclick="closeChallengeManager()" style="margin-top: 20px; background: linear-gradient(135deg, #95a5a6, #7f8c8d);">Lukk</button>
                    </div>
                </div>
                
                <!-- Competitions Section -->
                <div id="competitions-section" class="group-section" style="display: none;">
                    <h2>ğŸ† Kattekonkurranser</h2>
                    <div class="competitions-container">
                        <div class="competitions-tabs">
                            <button class="competition-tab-btn active" onclick="showCompetitionTab('active')" id="comp-tab-active">Aktive konkurranser</button>
                            <button class="competition-tab-btn" onclick="showCompetitionTab('create')" id="comp-tab-create">Opprett konkurranse</button>
                            <button class="competition-tab-btn" onclick="showCompetitionTab('history')" id="comp-tab-history">Historikk</button>
                        </div>
                        
                        <!-- Active Competitions -->
                        <div id="competitions-active-tab" class="competition-tab-content active">
                            <div id="active-competitions-list" class="competitions-list"></div>
                        </div>
                        
                        <!-- Create Competition -->
                        <div id="competitions-create-tab" class="competition-tab-content">
                            <div class="competition-form">
                                <label class="settings-label" for="competition-name">Konkurransenavn:</label>
                                <input type="text" id="competition-name" class="group-input" placeholder="F.eks. Ukentlig poengkonkurranse" maxlength="40" aria-label="Konkurransenavn" title="Konkurransenavn">
                                <label class="settings-label" for="competition-type">Type:</label>
                                <select id="competition-type" class="group-input" aria-label="Type konkurranse" title="Type konkurranse">
                                    <option value="score">Poeng</option>
                                    <option value="level">NivÃ¥</option>
                                    <option value="coins">Mynter</option>
                                    <option value="achievements">Achievements</option>
                                    <option value="minigames">Minispill spilt</option>
                                </select>
                                <label class="settings-label" for="competition-duration">Varighet (dager):</label>
                                <select id="competition-duration" class="group-input" aria-label="Varighet konkurranse" title="Varighet konkurranse">
                                    <option value="7">1 uke</option>
                                    <option value="14">2 uker</option>
                                    <option value="30">1 mÃ¥ned</option>
                                </select>
                                <label class="settings-label">Deltakere (venner eller grupper):</label>
                                <div id="competition-participants" class="competition-participants"></div>
                                <button class="action-btn" onclick="createCompetition()" style="margin-top: 15px;">ğŸ‰ Opprett konkurranse</button>
                            </div>
                        </div>
                        
                        <!-- Competition History -->
                        <div id="competitions-history-tab" class="competition-tab-content">
                            <div id="competitions-history-list" class="competitions-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content">
            <div class="settings-container">
                <h1 id="settings-title">Innstillinger âš™ï¸</h1>
                
                <!-- Profile Section -->
                <div class="settings-section">
                    <h2>ğŸ‘¤ Profil</h2>
                    <div class="profile-info">
                        <div class="profile-display">
                            <div class="profile-avatar-container">
                                <img id="profile-avatar" src="" alt="Profilbilde" class="profile-avatar" style="display: none;">
                                <div id="profile-badge" class="profile-badge" style="display: block;">ğŸ±</div>
                            </div>
                            <div class="profile-name">
                                <p id="current-user-display-settings">Bruker: Ikke innlogget</p>
                            </div>
                        </div>
                        <div class="profile-edit">
                            <label class="settings-label">Bio:</label>
                            <label for="profile-bio" class="sr-only">Profilbio</label>
                            <textarea id="profile-bio" class="profile-bio" placeholder="Skriv litt om deg selv..." aria-label="Skriv litt om deg selv" title="Skriv litt om deg selv"></textarea>
                            
                            <label class="settings-label">Profilbilde:</label>
                            <div class="profile-image-options">
                                <button class="action-btn" onclick="document.getElementById('profile-image-upload').click()">ğŸ“· Last opp bilde</button>
                                <label for="profile-image-upload" class="sr-only">Last opp profilbilde</label>
                                <input type="file" id="profile-image-upload" accept="image/*" style="display: none;" aria-label="Last opp profilbilde" title="Last opp profilbilde">
                                
                                <label class="settings-label" style="margin-top: 15px;">Eller velg badge:</label>
                                <div class="badge-selector">
                                    <div class="badge-option" onclick="selectBadge('ğŸ±')">ğŸ±</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜¸')">ğŸ˜¸</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜º')">ğŸ˜º</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜»')">ğŸ˜»</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜½')">ğŸ˜½</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ™€')">ğŸ™€</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜¼')">ğŸ˜¼</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜¾')">ğŸ˜¾</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸˆ')">ğŸˆ</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸˆâ€â¬›')">ğŸˆâ€â¬›</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ¾')">ğŸ¾</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ‘‘')">ğŸ‘‘</div>
                                    <div class="badge-option" onclick="selectBadge('â­')">â­</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ€')">ğŸ€</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ’–')">ğŸ’–</div>
                                </div>
                            </div>
                            <button class="action-btn" onclick="saveProfile()" style="margin-top: 20px;">ğŸ’¾ Lagre profil</button>
                        </div>
                    </div>
                </div>
                
                <!-- Language Section -->
                <div class="settings-section">
                    <h2>ğŸŒ SprÃ¥k / Language</h2>
                    <div class="language-selector">
                        <button class="action-btn" id="lang-no-btn" onclick="setLanguage('no')">ğŸ‡³ğŸ‡´ Norsk</button>
                        <button class="action-btn" id="lang-en-btn" onclick="setLanguage('en')">ğŸ‡¬ğŸ‡§ English</button>
                    </div>
                    <p class="settings-info" id="settings-info">Velg sprÃ¥k for spillet. All tekst vil endres til valgt sprÃ¥k.</p>
                </div>
                
                <!-- Theme Section -->
                <div class="settings-section">
                    <h2 id="theme-title">ğŸ¨ Tema / Theme</h2>
                    <div class="theme-selector">
                        <button class="action-btn theme-btn" id="theme-light-btn" onclick="setTheme('light')" data-theme="light">
                            <span class="theme-icon">â˜€ï¸</span> <span id="theme-light-text">Lys</span>
                        </button>
                        <button class="action-btn theme-btn" id="theme-dark-btn" onclick="setTheme('dark')" data-theme="dark">
                            <span class="theme-icon">ğŸŒ™</span> <span id="theme-dark-text">MÃ¸rk</span>
                        </button>
                        <button class="action-btn theme-btn" id="theme-auto-btn" onclick="setTheme('auto')" data-theme="auto">
                            <span class="theme-icon">ğŸ”„</span> <span id="theme-auto-text">Automatisk</span>
                        </button>
                    </div>
                    <p class="settings-info" id="theme-info">Velg tema for spillet. Automatisk endrer seg basert pÃ¥ tid pÃ¥ dagen.</p>
                </div>
                
                <!-- PWA Install Section -->
                <div class="settings-section" id="pwa-install-section" style="display: none;">
                    <h2>ğŸ“± Installer app</h2>
                    <button class="action-btn" onclick="installPWA()" style="margin: 5px; background: linear-gradient(135deg, #667eea, #764ba2);">ğŸ“± Installer pÃ¥ hjemmeskjerm</button>
                    <p class="settings-info">Installer MiauMiau som en app pÃ¥ enheten din for raskere tilgang og offline-stÃ¸tte!</p>
                </div>
                
                <!-- Data Management Section -->
                <div class="settings-section">
                    <h2>ğŸ’¾ Data</h2>
                    <div class="data-management">
                        <button class="action-btn" onclick="exportGameData()" style="margin: 5px; background: linear-gradient(135deg, #4ecdc4, #44a08d);">ğŸ“¥ Eksporter spilldata</button>
                        <button class="action-btn" onclick="document.getElementById('import-file').click()" style="margin: 5px; background: linear-gradient(135deg, #667eea, #764ba2);">ğŸ“¤ Importer spilldata</button>
                        <label for="import-file" class="sr-only">Importer spilldata</label>
                        <input type="file" id="import-file" accept=".json" style="display: none;" aria-label="Importer spilldata" title="Importer spilldata">
                    </div>
                    <p class="settings-info">Eksporter spilldata for Ã¥ lagre en sikkerhetskopi, eller importer for Ã¥ gjenopprette data.</p>
                </div>
                
                <!-- Logout Section -->
                <div class="settings-section">
                    <h2>ğŸšª Konto</h2>
                    <button id="logout-btn" class="action-btn logout-btn-settings" onclick="handleLogout()" style="display: none; background: linear-gradient(135deg, #e74c3c, #c0392b);">Logg ut</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Finished Screen -->
    <div id="game-finished-screen" class="game-finished-screen">
        <h2>ğŸ‰ Gratulerer! Du har rundet spillet! ğŸ‰</h2>
        <div class="finished-cat-image" style="font-size: 120px; margin: 20px 0;">ğŸ‰ğŸ±ğŸ‰</div>
        <p>Takk for at du tok sÃ¥ godt vare pÃ¥ katten din! Du er en ekte kattemester! ğŸ†</p>
        <button id="restart-game-btn" class="action-btn restart-btn">Start pÃ¥ nytt! ğŸ±</button>
    </div>

    <!-- Cat Friends Management Overlay -->
    <div id="cat-friends-overlay" class="overlay" style="display: none;">
        <div class="overlay-content cat-friends-modal">
            <h2>ğŸ± Administrer kattevenner</h2>
            <p style="margin-bottom: 20px; color: #666;">Velg hvilke katter som skal vÃ¦re aktive samtidig. Du kan ha opp til 5 katter aktive om gangen!</p>
            <div id="cat-friends-grid" class="cat-friends-grid"></div>
            <div style="margin-top: 20px;">
                <button class="action-btn" onclick="closeCatFriendsOverlay()" style="background: linear-gradient(135deg, #95a5a6, #7f8c8d);">Lukk</button>
            </div>
        </div>
    </div>

    <!-- Background Music -->
    <audio id="background-music" preload="auto"></audio>

    <!-- Music Control Panel -->
    <div id="music-control" class="music-control">
        <button id="music-close-btn" class="music-close-btn" title="Lukk musikkspiller">ğŸ±</button>
        <div class="music-info">
            <div id="current-song" class="current-song">ğŸµ Spilleliste klar</div>
        </div>
        <div class="music-controls-row">
            <button id="music-prev-btn" class="music-nav-btn" title="Forrige sang">â®ï¸</button>
            <button id="music-toggle-btn" class="music-toggle-btn" title="SlÃ¥ musikk pÃ¥/av">ğŸµ</button>
            <button id="music-next-btn" class="music-nav-btn" title="Neste sang">â­ï¸</button>
        </div>
        <div class="music-volume-control">
            <span>ğŸ”Š</span>
            <label for="music-volume" class="sr-only">Musikkvolum</label>
            <input type="range" id="music-volume" min="0" max="100" value="20" aria-label="Musikkvolum" title="Musikkvolum">
        </div>
    </div>

    <!-- Music Mini Button (when closed) -->
    <button id="music-mini-btn" class="music-mini-btn" title="Ã…pne musikkspiller" style="display: none;">ğŸµ</button>

    <!-- Cat Video Overlay -->
    <div id="cat-video-overlay" class="overlay" style="display: none;">
        <div class="overlay-content cat-video-modal">
            <button class="close-btn" onclick="closeCatVideo()" style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer;">âœ•</button>
            <h2 id="cat-video-title" style="margin-bottom: 20px; color: #333;">ğŸ± Kattevideo</h2>
            <div id="cat-video-container" style="width: 100%; max-width: 800px; margin: 0 auto;">
                <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                    <iframe id="cat-video-iframe" title="Kattevideo" aria-label="Kattevideo" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Cat Chat Overlay -->
    <div id="ai-cat-chat-overlay" class="overlay" style="display: none;">
        <div class="overlay-content ai-cat-chat-modal">
            <div class="ai-cat-chat-header">
                <h2 id="ai-cat-chat-title">ğŸ’¬ Snakk med katten</h2>
                <button class="close-btn" onclick="closeAICatChat()" style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 20px; cursor: pointer;">âœ•</button>
            </div>
            <div id="ai-cat-chat-messages" class="ai-cat-chat-messages">
                <div class="ai-cat-message ai-message">
                    <div class="ai-cat-avatar">ğŸ±</div>
                    <div class="ai-cat-text">
                        <p id="ai-cat-welcome-message">Hei! Jeg er katten din! Snakk med meg, og jeg skal svare basert pÃ¥ hvordan jeg har det! ğŸ˜¸</p>
                    </div>
                </div>
            </div>
            <div class="ai-cat-chat-input-container">
                <label for="ai-cat-chat-input" class="sr-only">Skriv til katten</label>
                <input type="text" id="ai-cat-chat-input" class="ai-cat-chat-input" placeholder="Skriv til katten..." maxlength="200" aria-label="Skriv til katten" title="Skriv til katten">
                <button class="action-btn" onclick="sendAICatMessage()" id="ai-cat-send-btn">Send</button>
                <button class="action-btn" onclick="generateAICatMessage()" id="ai-cat-auto-btn" style="background: linear-gradient(135deg, #667eea, #764ba2);">âœ¨ La katten snakke</button>
            </div>
            <div id="ai-cat-loading" class="ai-cat-loading" style="display: none;">
                <p>Katten tenker... ğŸ¤”</p>
            </div>
        </div>
    </div>

    <!-- API Configuration - Loaded from config.js (not committed to git) -->
    <script>
        // Try to load config.js, but don't show error if it doesn't exist
        const configScript = document.createElement('script');
        configScript.src = 'config.js';
        configScript.onerror = function() {
            console.warn('âš ï¸ config.js ikke funnet. Dette er normalt hvis du ikke har satt opp API-nÃ¸kkel lokalt.');
        };
        document.head.appendChild(configScript);
    </script>
    <script src="script.js"></script>
</body>
</html>

