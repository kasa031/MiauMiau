<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiauMiau - Katteparadis!</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login Overlay -->
    <div id="login-overlay" class="login-overlay">
        <div class="login-modal">
            <h1>ğŸ± Velkommen til MiauMiau! ğŸ±</h1>
            <div id="login-form" class="login-form">
                <h2>Logg inn</h2>
                <input type="text" id="login-username" placeholder="Brukernavn" autocomplete="username" onkeypress="if(event.key === 'Enter') handleLogin()">
                <input type="password" id="login-password" placeholder="Passord" autocomplete="current-password" onkeypress="if(event.key === 'Enter') handleLogin()">
                <button class="action-btn" onclick="handleLogin()">Logg inn</button>
                <p class="login-switch">Har du ikke en bruker? <a href="#" onclick="showSignup()">Opprett ny bruker</a></p>
            </div>
            <div id="signup-form" class="login-form" style="display: none;">
                <h2>Opprett ny bruker</h2>
                <input type="text" id="signup-username" placeholder="Brukernavn (minst 3 tegn)" autocomplete="username" onkeypress="if(event.key === 'Enter') handleSignup()">
                <input type="password" id="signup-password" placeholder="Passord (minst 4 tegn)" autocomplete="new-password" onkeypress="if(event.key === 'Enter') handleSignup()">
                <input type="password" id="signup-password-confirm" placeholder="Bekreft passord" autocomplete="new-password" onkeypress="if(event.key === 'Enter') handleSignup()">
                <button class="action-btn" onclick="handleSignup()">Opprett bruker</button>
                <p class="login-switch">Har du allerede en bruker? <a href="#" onclick="showLogin()">Logg inn</a></p>
            </div>
            <div id="login-error" class="login-error"></div>
        </div>
    </div>

    <!-- Welcome Guide Overlay -->
    <div id="welcome-overlay" class="welcome-overlay" style="display: none;">
        <div class="welcome-modal">
            <h1>ğŸ± Velkommen til MiauMiau! ğŸ±</h1>
            <div class="welcome-content">
                <div class="welcome-section">
                    <h2>ğŸ“– Hvordan spille:</h2>
                    <p><strong>1. Ta vare pÃ¥ katten:</strong><br>
                    â€¢ Mat katten nÃ¥r den er sulten ğŸ–<br>
                    â€¢ Lek med katten for Ã¥ gjÃ¸re den glad ğŸ¾<br>
                    â€¢ Kose katten for mer lykke â¤ï¸<br>
                    â€¢ La den sove nÃ¥r den er sliten ğŸ˜´<br>
                    â€¢ Vask katten for Ã¥ gjÃ¸re den glad ğŸ§¼</p>
                    
                    <p><strong>2. FÃ¥ mynter ğŸ’°:</strong><br>
                    â€¢ Spill minispill (Musjakt eller Matfanging) ğŸ¯<br>
                    â€¢ FullfÃ¸r daglige utfordringer ğŸ“…<br>
                    â€¢ GÃ¥ opp i nivÃ¥er â­<br>
                    â€¢ Bruk items fra butikken!</p>
                    
                    <p><strong>3. KjÃ¸p items i butikken ğŸ›’:</strong><br>
                    â€¢ Leksaker for Ã¥ leke med katten ğŸ¾<br>
                    â€¢ Soveting (pute, teppe) for katten ğŸ’¤<br>
                    â€¢ Kosmetikk (halsbÃ¥nd, slÃ¸yfe, etc.) âœ¨</p>
                    
                    <p><strong>4. Utforsk:</strong><br>
                    â€¢ Se dine bedrifter ğŸ†<br>
                    â€¢ Samle katter i albumet ğŸ“¸<br>
                    â€¢ Sjekk statistikk ğŸ“Š</p>
                </div>
                <div class="welcome-tips">
                    <h3>ğŸ’¡ Tips:</h3>
                    <ul>
                        <li>Hold kattens lykke, sult og energi hÃ¸ye!</li>
                        <li>Spill minispill for Ã¥ tjene mynter raskt</li>
                        <li>Du kan "kjÃ¸pe deg fri" fra ventetid med mynter</li>
                        <li>HÃ¸yere nivÃ¥ = mer poeng og belÃ¸nninger!</li>
                    </ul>
                </div>
            </div>
            <button class="action-btn welcome-start-btn" onclick="closeWelcome()">Start spillet! ğŸ®</button>
        </div>
    </div>

    <nav class="navbar">
        <div class="nav-tabs">
            <button class="tab-btn active" data-tab="home">Hjem</button>
            <button class="tab-btn" data-tab="game">Spill ğŸ®</button>
            <button class="tab-btn" data-tab="shop">Butikk ğŸ›’</button>
            <button class="tab-btn" data-tab="achievements">Bedrifter ğŸ†</button>
            <button class="tab-btn" data-tab="album">Album ğŸ“¸</button>
            <button class="tab-btn" data-tab="school">Skole ğŸ“</button>
            <button class="tab-btn" data-tab="stats">Statistikk ğŸ“Š</button>
            <button class="tab-btn" data-tab="groups">Grupper ğŸ‘¥</button>
            <button class="tab-btn" data-tab="settings">Innstillinger âš™ï¸</button>
        </div>
    </nav>

    <div class="content">
        <!-- Home Tab -->
        <div id="home-tab" class="tab-content active">
            <div class="home-header">
                <h1>Velkommen til katteparadis! ğŸ±</h1>
                <div class="home-description">
                    <p>MiauMiau er et morsomt og lÃ¦rerikt spill hvor du tar vare pÃ¥ din egen katt! 
                    Spill minispill, lÃ¦r om katter i katteskolen, samle achievements og mynter, 
                    og utforsk alt katteparadiset har Ã¥ by pÃ¥. Alt er laget spesielt for barn, 
                    med enkle og tydelige tekster, morsomme aktiviteter og mye Ã¥ oppdage!</p>
                </div>
            </div>
            <div class="cat-container">
                <!-- Floating cats around -->
                <div class="floating-cat cat-1">ğŸ±</div>
                <div class="floating-cat cat-2">ğŸ˜¸</div>
                <div class="floating-cat cat-3">ğŸ˜»</div>
                <div class="floating-cat cat-4">ğŸ™€</div>
                <div class="floating-cat cat-5">ğŸ˜º</div>
                <div class="floating-cat cat-6">ğŸ˜¾</div>
                <div class="floating-cat cat-7">ğŸˆ</div>
                <div class="floating-cat cat-8">ğŸˆâ€â¬›</div>
                <div class="floating-cat cat-9">ğŸ˜¼</div>
                <div class="floating-cat cat-10">ğŸ˜½</div>
                <div class="floating-cat cat-11">ğŸ˜¹</div>
                <div class="floating-cat cat-12">ğŸ¾</div>
                
                <!-- Center cat with rainbow -->
                <div class="center-cat">
                    <div class="rainbow-container">
                        <div class="rainbow rainbow-1"></div>
                        <div class="rainbow rainbow-2"></div>
                        <div class="rainbow rainbow-3"></div>
                        <div class="rainbow rainbow-4"></div>
                        <div class="rainbow rainbow-5"></div>
                    </div>
                    <div class="cat-face" id="home-cat-face">ğŸ˜¸</div>
                </div>
                <!-- Interactive cat images -->
                <div class="interactive-cat-images">
                    <img src="Bilder/babycat.jpg" alt="Babykatt" class="interactive-cat-img" id="cat-img-1" onclick="showCatImageInfo('babycat.jpg', 'Babykatt')">
                    <img src="Bilder/brindle.jpg" alt="Brindle katt" class="interactive-cat-img" id="cat-img-2" onclick="showCatImageInfo('brindle.jpg', 'Brindle katt')">
                    <img src="Bilder/redcat.jpg" alt="RÃ¸d katt" class="interactive-cat-img" id="cat-img-3" onclick="showCatImageInfo('redcat.jpg', 'RÃ¸d katt')">
                    <img src="Bilder/Cat Pink GIF.gif" alt="Rosa katt" class="interactive-cat-img gif-img" id="cat-img-4" onclick="showCatImageInfo('Cat Pink GIF.gif', 'Rosa katt')">
                    <img src="Bilder/Bored Cat GIF.gif" alt="Kjedelig katt" class="interactive-cat-img gif-img" id="cat-img-5" onclick="showCatImageInfo('Bored Cat GIF.gif', 'Kjedelig katt')">
                    <img src="Bilder/Cat Battle GIF.gif" alt="Kattkamp" class="interactive-cat-img gif-img" id="cat-img-6" onclick="showCatImageInfo('Cat Battle GIF.gif', 'Kattkamp')">
                </div>
            </div>
        </div>

        <!-- Game Tab -->
        <div id="game-tab" class="tab-content">
            <div class="game-container">
                <h1>Spill ğŸ®</h1>
                
                <div class="game-cat-area">
                    <div id="bed" class="bed">ğŸ›ï¸</div>
                    <div id="food-item" class="food-item"></div>
                    <div id="game-cat" class="game-cat">
                        <span class="cat-bow">ğŸ€</span>
                        <img id="game-cat-gif" src="" alt="Katt" style="display: none; max-width: 200px; max-height: 200px; border-radius: 15px;">
                        <span id="cat-emoji">ğŸ˜¸</span>
                    </div>
                    <div id="cat-status" class="cat-status">
                        <div class="stat">
                            <span>Happiness: </span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="happiness-bar" style="width: 50%"></div>
                            </div>
                            <span class="stat-value" id="happiness">50</span>%
                        </div>
                        <div class="stat">
                            <span>Hunger: </span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="hunger-bar" style="width: 50%"></div>
                            </div>
                            <span class="stat-value" id="hunger">50</span>%
                        </div>
                        <div class="stat">
                            <span>Energy: </span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="energy-bar" style="width: 50%"></div>
                            </div>
                            <span class="stat-value" id="energy">50</span>%
                        </div>
                    </div>
                    
                    <div class="score-section">
                        <div class="score-display">
                            <span>Poeng: </span>
                            <span id="score">0</span>
                        </div>
                        <div class="level-display">
                            <span>NivÃ¥: </span>
                            <span id="level">1</span>
                        </div>
                    </div>
                </div>

                <div class="game-actions">
                    <button class="action-btn" id="feed-btn">ğŸ– Mate</button>
                    <button class="action-btn" id="play-btn">ğŸ¾ Leke</button>
                    <button class="action-btn" id="pet-btn">â¤ï¸ Kose</button>
                    <button class="action-btn" id="sleep-btn">ğŸ˜´ La sove</button>
                    <button class="action-btn" id="clean-btn">ğŸ› Vask</button>
                    <button class="action-btn" id="pizza-btn">ğŸ• Pizza</button>
                    <button class="action-btn" id="bottle-btn">ğŸ¼ TÃ¥teflaske</button>
                    <button class="action-btn" id="hand-btn">ğŸ‘‹ KosehÃ¥nd</button>
                </div>

                <div id="game-message" class="game-message"></div>
                <div id="cat-notifications" class="cat-notifications"></div>
                <div id="daily-challenge" class="daily-challenge"></div>
                <div id="daily-reward-section" class="daily-reward-section"></div>
                <div id="quests-section" class="quests-section" style="display: none;">
                    <h3 style="margin: 20px 0 10px; color: #333; font-size: 22px;">ğŸ“‹ Oppdrag:</h3>
                    <div id="quests-list" class="quests-list"></div>
                </div>
                <div id="owned-items-section" class="owned-items-section"></div>
                <div class="cat-tricks-section">
                    <h3 style="margin: 20px 0 10px; color: #333; font-size: 22px;">ğŸ© Kattetriks:</h3>
                    <div class="cat-tricks-buttons">
                        <button class="action-btn" onclick="teachCatTrick('sit')">Sitt ğŸª‘</button>
                        <button class="action-btn" onclick="teachCatTrick('jump')">Hopp ğŸ¦˜</button>
                        <button class="action-btn" onclick="teachCatTrick('spin')">Snurr ğŸŒªï¸</button>
                        <button class="action-btn" onclick="teachCatTrick('dance')">Dans ğŸ’ƒ</button>
                    </div>
                </div>
                
                <!-- Minigames Section -->
                <div class="minigames-section" style="margin-top: 40px; padding-top: 30px; border-top: 3px solid #667eea;">
                    <h2 style="margin: 20px 0; color: #333; font-size: 28px; text-align: center;">ğŸ¯ Minispill</h2>
                    <div class="minigames-grid">
                        <div class="minigame-card" id="mouse-hunt-game">
                            <h2>Musjakt ğŸ­</h2>
                            <p>Klikk pÃ¥ musene som dukker opp!</p>
                            <button class="action-btn" onclick="startMouseHunt()">Start spill</button>
                            <div class="minigame-area" id="mouse-hunt-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="mouse-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="mouse-time">30</span>s</div>
                            </div>
                        </div>
                        <div class="minigame-card" id="food-catch-game">
                            <h2>Matfanging ğŸ–</h2>
                            <p>Fang maten som faller ned fra himmelen!<br>
                            <strong>Kontroller:</strong> Bruk â† og â†’ piltastene for Ã¥ flytte katten<br>
                            <strong>MÃ¥l:</strong> FÃ¥ katten under maten fÃ¸r den faller i bakken</p>
                            <button class="action-btn" onclick="startFoodCatch()">Start spill</button>
                            <div class="minigame-area" id="food-catch-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="food-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="food-time">30</span>s</div>
                                <div class="catch-game-container" id="catch-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="cat-battle-game">
                            <h2>Kattkamp âš”ï¸</h2>
                            <p>Hjelp katten din Ã¥ kjempe! Klikk pÃ¥ angrepsknappen i rett tid!</p>
                            <button class="action-btn" onclick="startCatBattle()">Start spill</button>
                            <div class="minigame-area" id="cat-battle-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="battle-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="battle-time">30</span>s</div>
                                <div class="battle-container" id="battle-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="cat-scratch-game">
                            <h2>Katt-kloring ğŸ¾</h2>
                            <p>Klatr pÃ¥ kloretreet! Trykk pÃ¥ knappene nÃ¥r de lyser opp!</p>
                            <button class="action-btn" onclick="startCatScratch()">Start spill</button>
                            <div class="minigame-area" id="cat-scratch-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="scratch-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="scratch-time">30</span>s</div>
                                <div class="scratch-container" id="scratch-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="cat-hunt-game">
                            <h2>Kattjakt ğŸ¦</h2>
                            <p>Fang fugler og fisk! Beveg katten med piltastene eller touch!</p>
                            <button class="action-btn" onclick="startCatHunt()">Start spill</button>
                            <div class="minigame-area" id="cat-hunt-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="hunt-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="hunt-time">30</span>s</div>
                                <div class="hunt-game-container" id="hunt-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="nyan-cat-game">
                            <h2>Nyan Cat ğŸ±ğŸŒˆ</h2>
                            <p>Spesial spill! Se hvor langt du kan komme med Nyan Cat!</p>
                            <button class="action-btn" onclick="startNyanCat()">Start spill</button>
                            <div class="minigame-area" id="nyan-cat-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="nyan-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="nyan-time">60</span>s</div>
                                <div class="nyan-container" id="nyan-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="bored-cat-game">
                            <h2>Kjedelig Katt ğŸ˜´</h2>
                            <p>Lei katten med aktiviteter! Klikk pÃ¥ tingene som dukker opp!</p>
                            <button class="action-btn" onclick="startBoredCat()">Start spill</button>
                            <div class="minigame-area" id="bored-cat-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="bored-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="bored-time">30</span>s</div>
                                <div class="bored-container" id="bored-container"></div>
                            </div>
                        </div>
                        <div class="minigame-card" id="reading-game">
                            <h2>Lesespill ğŸ“š</h2>
                            <p>Match ord med bildet! Klikk pÃ¥ det riktige ordet!</p>
                            <button class="action-btn" onclick="startReadingGame()">Start spill</button>
                            <div class="minigame-area" id="reading-game-area" style="display:none;">
                                <div class="score-mini">Poeng: <span id="reading-score">0</span></div>
                                <div class="time-left">Tid igjen: <span id="reading-time">60</span>s</div>
                                <div class="reading-container" id="reading-container"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Shop Tab -->
        <div id="shop-tab" class="tab-content">
            <div class="shop-container">
                <h1>Butikk ğŸ›’</h1>
                <div class="coins-display">ğŸ’° Mynter: <span id="coins">0</span></div>
                <div class="shop-items" id="shop-items"></div>
                <div class="shop-pagination" id="shop-pagination" style="display: none;">
                    <button class="pagination-btn" id="shop-prev-btn" onclick="changeShopPage(-1)">â† Forrige</button>
                    <span class="pagination-info" id="shop-page-info">Side 1 av 1</span>
                    <button class="pagination-btn" id="shop-next-btn" onclick="changeShopPage(1)">Neste â†’</button>
                </div>
            </div>
        </div>

        <!-- Achievements Tab -->
        <div id="achievements-tab" class="tab-content">
            <div class="achievements-container">
                <h1>Bedrifter ğŸ†</h1>
                <div class="achievements-grid" id="achievements-grid"></div>
            </div>
        </div>

        <!-- Album Tab -->
        <div id="album-tab" class="tab-content">
            <div class="album-container">
                <h1>Album ğŸ“¸</h1>
                <div class="cats-selector">
                    <button class="cat-select-btn active" data-cat="0">Katt 1</button>
                    <button class="cat-select-btn" data-cat="1">Katt 2</button>
                    <button class="cat-select-btn" data-cat="2">Katt 3</button>
                    <button class="cat-select-btn" data-cat="3">Babykatt</button>
                    <button class="cat-select-btn" data-cat="4">Brindle</button>
                    <button class="cat-select-btn" data-cat="5">RÃ¸d katt</button>
                    <button class="cat-select-btn" data-cat="6">Rosa katt</button>
                </div>
                <div class="album-cat-display" id="album-cat-display"></div>
            </div>
        </div>

        <!-- School Tab -->
        <div id="school-tab" class="tab-content">
            <div class="school-container">
                <h1>Skole ğŸ“</h1>
                <div class="school-subjects">
                    <div class="subject-card" id="math-subject">
                        <h2>ğŸ”¢ Kattergening</h2>
                        <p>LÃ¦r regning med katter! Pluss, minus, gange og dele opp til 10.</p>
                        <button class="action-btn" onclick="startMathGame()">Start lekse</button>
                        <div class="subject-area" id="math-area" style="display:none;"></div>
                    </div>
                    <div class="subject-card" id="hygiene-subject">
                        <h2>ğŸ§¼ Kattehygiene</h2>
                        <p>LÃ¦r om hvordan katter holder seg rene!</p>
                        <button class="action-btn" onclick="showHygieneInfo()">Les mer</button>
                        <div class="subject-area" id="hygiene-area" style="display:none;"></div>
                    </div>
                    <div class="subject-card" id="food-subject">
                        <h2>ğŸ½ï¸ Kattemat</h2>
                        <p>Lag mat til katten! Hva liker katter Ã¥ spise?</p>
                        <button class="action-btn" onclick="startCookingGame()">Lag mat</button>
                        <div class="subject-area" id="cooking-area" style="display:none;"></div>
                    </div>
                    <div class="subject-card" id="art-subject">
                        <h2>ğŸ¨ Katteestetikk</h2>
                        <p>Tegn og fargelegg katter! Kreativ lekse!</p>
                        <button class="action-btn" onclick="startArtGame()">Start tegning</button>
                        <div class="subject-area" id="art-area" style="display:none;"></div>
                    </div>
                    <div class="subject-card" id="quiz-subject">
                        <h2>ğŸ§  Kattefakta Quiz</h2>
                        <p>Test kunnskapen din om katter! Svar pÃ¥ spÃ¸rsmÃ¥l og fÃ¥ poeng!</p>
                        <button class="action-btn" onclick="startCatQuiz()">Start quiz</button>
                        <div class="subject-area" id="quiz-area" style="display:none;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Tab -->
        <div id="stats-tab" class="tab-content">
            <div class="stats-container">
                <h1>Statistikk ğŸ“Š</h1>
                <div class="stats-grid" id="stats-grid"></div>
            </div>
        </div>

        <!-- Friends Tab -->
        <div id="friends-tab" class="tab-content">
            <div class="friends-container">
                <h1>Venner ğŸ‘«</h1>
                
                <!-- Friend Requests -->
                <div id="friend-requests-section" class="friend-section">
                    <h2>ğŸ“¬ VennforespÃ¸rsler</h2>
                    <div id="friend-requests-list" class="friend-requests-list"></div>
                </div>
                
                <!-- Add Friend -->
                <div class="friend-section">
                    <h2>â• Legg til venn</h2>
                    <div class="friend-form">
                        <label class="settings-label">Brukernavn:</label>
                        <input type="text" id="friend-username-input" class="group-input" placeholder="Skriv brukernavnet" maxlength="30">
                        <button class="action-btn" onclick="sendFriendRequest()">ğŸ“¤ Send vennforespÃ¸rsel</button>
                    </div>
                </div>
                
                <!-- My Friends List -->
                <div class="friend-section">
                    <h2>ğŸ‘¥ Mine venner</h2>
                    <div id="friends-list" class="friends-list"></div>
                </div>
                
                <!-- Friend Messages -->
                <div id="friend-messages-section" class="friend-section" style="display: none;">
                    <h2>ğŸ’Œ Meldinger til <span id="friend-messages-username"></span></h2>
                    <div class="friend-messages-container">
                        <div id="friend-messages-list" class="friend-messages-list"></div>
                        <div class="friend-messages-input-container">
                            <input type="text" id="friend-message-input" class="group-chat-input" placeholder="Skriv en melding..." maxlength="200" onkeypress="if(event.key === 'Enter') sendFriendMessage()">
                            <button class="action-btn" onclick="sendFriendMessage()">Send</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Groups Tab -->
        <div id="groups-tab" class="tab-content">
            <div class="groups-container">
                <h1>Grupper ğŸ‘¥</h1>
                
                <!-- My Group Info -->
                <div id="my-group-section" class="group-section" style="display: none;">
                    <h2>ğŸ¯ Min gruppe</h2>
                    <div class="group-info-card">
                        <div class="group-header">
                            <h3 id="current-group-name"></h3>
                            <span id="current-group-role" class="group-role"></span>
                        </div>
                        <p id="current-group-members-count" class="group-members-count"></p>
                        <div id="group-challenge-section" class="group-challenge-box" style="display: none;">
                            <div class="challenge-header">
                                <h4>ğŸ¯ Gruppens ukentlige utfordring:</h4>
                                <button class="challenge-edit-btn" onclick="showChallengeManager()" title="Administrer utfordringer">âš™ï¸</button>
                            </div>
                            <div id="challenges-list" class="challenges-list"></div>
                            <p id="group-challenge-text"></p>
                            <div class="group-challenge-progress">
                                <div class="progress-bar-mini" style="background: #e0e0e0;">
                                    <div id="group-challenge-progress-bar" class="progress-fill" style="width: 0%;"></div>
                                </div>
                                <span id="group-challenge-progress-text">0/0</span>
                            </div>
                        </div>
                        <div class="group-actions">
                            <button class="action-btn" onclick="viewGroupStats()">ğŸ“Š Se gruppestatistikk</button>
                            <button class="action-btn" onclick="openGroupChat()">ğŸ’¬ Gruppechat</button>
                            <button class="action-btn" onclick="viewGroupMembers()">ğŸ‘¥ Se medlemmer</button>
                            <button class="action-btn" onclick="leaveGroup()" style="background: linear-gradient(135deg, #e74c3c, #c0392b); margin-top: 10px;">Forlat gruppe</button>
                        </div>
                    </div>
                </div>
                
                <!-- Create Group -->
                <div class="group-section">
                    <h2>â• Opprett ny gruppe</h2>
                    <div class="group-form">
                        <label class="settings-label">Gruppenavn:</label>
                        <input type="text" id="new-group-name" class="group-input" placeholder="F.eks. Kattelag2024" maxlength="30">
                        <label class="settings-label">Passord (for Ã¥ joine gruppen):</label>
                        <input type="password" id="new-group-password" class="group-input" placeholder="Velg et passord" maxlength="20">
                        <button class="action-btn" onclick="createGroup()">ğŸ‰ Opprett gruppe</button>
                    </div>
                </div>
                
                <!-- Join Group -->
                <div class="group-section">
                    <h2>ğŸ” Bli med i gruppe</h2>
                    <div class="group-form">
                        <label class="settings-label">Gruppenavn:</label>
                        <input type="text" id="join-group-name" class="group-input" placeholder="Skriv gruppenavnet" maxlength="30">
                        <label class="settings-label">Passord:</label>
                        <input type="password" id="join-group-password" class="group-input" placeholder="Skriv gruppepassordet">
                        <button class="action-btn" onclick="joinGroup()">âœ… Bli med</button>
                    </div>
                    <div class="invite-friends-section" style="margin-top: 15px;">
                        <h3 style="font-size: 16px; margin-bottom: 10px;">ğŸ“¨ Eller inviter venner til gruppe:</h3>
                        <div id="invite-friends-list" class="invite-friends-list"></div>
                    </div>
                </div>
                
                <!-- Group Statistics Comparison -->
                <div id="group-stats-section" class="group-section" style="display: none;">
                    <h2>ğŸ“Š Gruppestatistikk</h2>
                    <div id="group-stats-grid" class="group-stats-grid"></div>
                </div>
                
                <!-- Group Chat -->
                <div id="group-chat-section" class="group-section" style="display: none;">
                    <h2>ğŸ’¬ Gruppechat</h2>
                    <div class="group-chat-container">
                        <div id="group-chat-messages" class="group-chat-messages"></div>
                        <div class="group-chat-input-container">
                            <div class="chat-emoji-picker">
                                <button class="emoji-picker-btn" onclick="toggleEmojiPicker()" title="Velg emoji">ğŸ˜Š</button>
                                <div id="emoji-picker" class="emoji-picker" style="display: none;">
                                    <div class="emoji-grid">
                                        <span onclick="insertEmoji('ğŸ˜Š')">ğŸ˜Š</span>
                                        <span onclick="insertEmoji('ğŸ˜¸')">ğŸ˜¸</span>
                                        <span onclick="insertEmoji('ğŸ˜º')">ğŸ˜º</span>
                                        <span onclick="insertEmoji('ğŸ˜»')">ğŸ˜»</span>
                                        <span onclick="insertEmoji('ğŸ±')">ğŸ±</span>
                                        <span onclick="insertEmoji('ğŸ‰')">ğŸ‰</span>
                                        <span onclick="insertEmoji('ğŸ®')">ğŸ®</span>
                                        <span onclick="insertEmoji('ğŸ†')">ğŸ†</span>
                                        <span onclick="insertEmoji('â­')">â­</span>
                                        <span onclick="insertEmoji('ğŸ’–')">ğŸ’–</span>
                                        <span onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
                                        <span onclick="insertEmoji('ğŸ‘')">ğŸ‘</span>
                                    </div>
                                </div>
                            </div>
                            <input type="text" id="group-chat-input" class="group-chat-input" placeholder="Skriv en melding..." maxlength="200" onkeypress="if(event.key === 'Enter') sendGroupMessage()">
                            <button class="action-btn" onclick="sendGroupMessage()">Send</button>
                        </div>
                    </div>
                </div>
                
                <!-- Group Members List -->
                <div id="group-members-section" class="group-section" style="display: none;">
                    <h2>ğŸ‘¥ Gruppemedlemmer</h2>
                    <div id="group-members-list" class="group-members-list"></div>
                </div>
                
                <!-- Challenge Manager -->
                <div id="challenge-manager-modal" class="modal-overlay" style="display: none;">
                    <div class="modal-content">
                        <h2>âš™ï¸ Administrer utfordringer</h2>
                        <div class="challenge-manager">
                            <div class="existing-challenges">
                                <h3>NÃ¥vÃ¦rende utfordringer:</h3>
                                <div id="existing-challenges-list" class="challenges-list-manager"></div>
                            </div>
                            <div class="add-challenge">
                                <h3>Legg til ny utfordring:</h3>
                                <label class="settings-label">Type:</label>
                                <select id="new-challenge-type" class="group-input">
                                    <option value="score">Poeng</option>
                                    <option value="minigame">Minispill</option>
                                    <option value="feed">Mat</option>
                                    <option value="play">Lek</option>
                                    <option value="level">NivÃ¥</option>
                                </select>
                                <label class="settings-label">Beskrivelse:</label>
                                <input type="text" id="new-challenge-desc" class="group-input" placeholder="F.eks. Samle 1000 poeng til sammen" maxlength="50">
                                <label class="settings-label">MÃ¥l:</label>
                                <input type="number" id="new-challenge-target" class="group-input" placeholder="1000" min="1">
                                <button class="action-btn" onclick="addGroupChallenge()">â• Legg til utfordring</button>
                            </div>
                        </div>
                        <button class="action-btn" onclick="closeChallengeManager()" style="margin-top: 20px; background: linear-gradient(135deg, #95a5a6, #7f8c8d);">Lukk</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content">
            <div class="settings-container">
                <h1 id="settings-title">Innstillinger âš™ï¸</h1>
                
                <!-- Profile Section -->
                <div class="settings-section">
                    <h2>ğŸ‘¤ Profil</h2>
                    <div class="profile-info">
                        <div class="profile-display">
                            <div class="profile-avatar-container">
                                <img id="profile-avatar" src="" alt="Profilbilde" class="profile-avatar" style="display: none;">
                                <div id="profile-badge" class="profile-badge" style="display: block;">ğŸ±</div>
                            </div>
                            <div class="profile-name">
                                <p id="current-user-display-settings">Bruker: Ikke innlogget</p>
                            </div>
                        </div>
                        <div class="profile-edit">
                            <label class="settings-label">Bio:</label>
                            <textarea id="profile-bio" class="profile-bio" placeholder="Skriv litt om deg selv..."></textarea>
                            
                            <label class="settings-label">Profilbilde:</label>
                            <div class="profile-image-options">
                                <button class="action-btn" onclick="document.getElementById('profile-image-upload').click()">ğŸ“· Last opp bilde</button>
                                <input type="file" id="profile-image-upload" accept="image/*" style="display: none;" onchange="handleProfileImageUpload(event)">
                                
                                <label class="settings-label" style="margin-top: 15px;">Eller velg badge:</label>
                                <div class="badge-selector">
                                    <div class="badge-option" onclick="selectBadge('ğŸ±')">ğŸ±</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜¸')">ğŸ˜¸</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜º')">ğŸ˜º</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜»')">ğŸ˜»</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜½')">ğŸ˜½</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ™€')">ğŸ™€</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜¼')">ğŸ˜¼</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ˜¾')">ğŸ˜¾</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸˆ')">ğŸˆ</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸˆâ€â¬›')">ğŸˆâ€â¬›</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ¾')">ğŸ¾</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ‘‘')">ğŸ‘‘</div>
                                    <div class="badge-option" onclick="selectBadge('â­')">â­</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ€')">ğŸ€</div>
                                    <div class="badge-option" onclick="selectBadge('ğŸ’–')">ğŸ’–</div>
                                </div>
                            </div>
                            <button class="action-btn" onclick="saveProfile()" style="margin-top: 20px;">ğŸ’¾ Lagre profil</button>
                        </div>
                    </div>
                </div>
                
                <!-- Language Section -->
                <div class="settings-section">
                    <h2>ğŸŒ SprÃ¥k / Language</h2>
                    <div class="language-selector">
                        <button class="action-btn" id="lang-no-btn" onclick="setLanguage('no')">ğŸ‡³ğŸ‡´ Norsk</button>
                        <button class="action-btn" id="lang-en-btn" onclick="setLanguage('en')">ğŸ‡¬ğŸ‡§ English</button>
                    </div>
                    <p class="settings-info" id="settings-info">Velg sprÃ¥k for spillet. All tekst vil endres til valgt sprÃ¥k.</p>
                </div>
                
                <!-- Data Management Section -->
                <div class="settings-section">
                    <h2>ğŸ’¾ Data</h2>
                    <div class="data-management">
                        <button class="action-btn" onclick="exportGameData()" style="margin: 5px; background: linear-gradient(135deg, #4ecdc4, #44a08d);">ğŸ“¥ Eksporter spilldata</button>
                        <button class="action-btn" onclick="document.getElementById('import-file').click()" style="margin: 5px; background: linear-gradient(135deg, #667eea, #764ba2);">ğŸ“¤ Importer spilldata</button>
                        <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importGameData(event)">
                    </div>
                    <p class="settings-info">Eksporter spilldata for Ã¥ lagre en sikkerhetskopi, eller importer for Ã¥ gjenopprette data.</p>
                </div>
                
                <!-- Logout Section -->
                <div class="settings-section">
                    <h2>ğŸšª Konto</h2>
                    <button id="logout-btn" class="action-btn logout-btn-settings" onclick="handleLogout()" style="display: none; background: linear-gradient(135deg, #e74c3c, #c0392b);">Logg ut</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Finished Screen -->
    <div id="game-finished-screen" class="game-finished-screen">
        <h2>ğŸ‰ Gratulerer! Du har rundet spillet! ğŸ‰</h2>
        <img src="cat_finished.jpg" alt="SÃ¸t kattunge som har rundet spillet" class="finished-cat-image">
        <p>Takk for at du tok sÃ¥ godt vare pÃ¥ katten din! Du er en ekte kattemester! ğŸ†</p>
        <button id="restart-game-btn" class="action-btn restart-btn">Start pÃ¥ nytt! ğŸ±</button>
    </div>

    <!-- Background Music -->
    <audio id="background-music" preload="auto"></audio>

    <!-- Music Control Panel -->
    <div id="music-control" class="music-control">
        <button id="music-close-btn" class="music-close-btn" title="Lukk musikkspiller">ğŸ±</button>
        <div class="music-info">
            <div id="current-song" class="current-song">ğŸµ Spilleliste klar</div>
        </div>
        <div class="music-controls-row">
            <button id="music-prev-btn" class="music-nav-btn" title="Forrige sang">â®ï¸</button>
            <button id="music-toggle-btn" class="music-toggle-btn" title="SlÃ¥ musikk pÃ¥/av">ğŸµ</button>
            <button id="music-next-btn" class="music-nav-btn" title="Neste sang">â­ï¸</button>
        </div>
        <div class="music-volume-control">
            <span>ğŸ”Š</span>
            <input type="range" id="music-volume" min="0" max="100" value="20" title="VolumnivÃ¥">
        </div>
    </div>

    <!-- Music Mini Button (when closed) -->
    <button id="music-mini-btn" class="music-mini-btn" title="Ã…pne musikkspiller" style="display: none;">ğŸµ</button>

    <!-- API Configuration - Loaded from config.js (not committed to git) -->
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>

